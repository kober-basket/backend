# 一、多线程
## 为什么要用多线程？
- 提高单CPU利用率。
    > 线程A等待IO响应时，切换到线程B执行其他操作。
- 提高多CPU或CPU内核利用率。
    > 多线程可额外利用空闲的CPU或内核。
- 交替响应用户不同请求，提供更好的用户体验。
    > 如果IO耗时线程不切换，UI可能卡死（可用background线程执行）
- 提高客户端间公平性。
    > client1访问server执行时，client2访问server需要等client1结束才能执行，造成不平等。

**多CPU多线程图示**
![](https://jenkov.com/images/java-concurrency/java-concurrency-tutorial-introduction-1.png)

## 多线程问题
可能遇到下面两种多线程访问共享资源的情况：
1. Thread1读取内存地址1，Thread2写入内存地址1.
Thread1读取后Thread2写入 or Thread2写入后Thread1读取，结果是不一样的。
2. Thread1写入内存地址1，Thread2写入内存地址1.
两个写入先后顺序不同，最终内容也不同。

因此，需要能够用程序去控制线程如何正确访问资源（包括内存、数据库、文件等），由此引出并发模型。

## 主流并发模型
![alt text](image.png)


